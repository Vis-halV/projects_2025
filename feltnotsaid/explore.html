<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">

    <script src="https://kit.fontawesome.com/37f8a96df3.js" crossorigin="anonymous"></script>

    <title>feltnotsaid</title>
    
</head>
<body>

    <!-- Header -->
    <header class="fixed top-0 w-full bg-white/80 backdrop-blur-md border-b border-gray-200 z-50">
      <nav class="container mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
            <a href="/" class="font-playfair text-xl font-medium tracking-tight">feltnotsaid</a>
            
            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center space-x-8 text-sm font-light tracking-wide transition-colors duration-200 text-gray-700 hover:text-black hover:border-black">
                <a id="create" href="/create" class="border-b border-grey-500">Create</a>
                <a id="explore" href="/explore" class="border-b border-grey-500">Explore</a>
                <a id="about" href="/about.html" class="border-b border-grey-500">About</a>
                <a id="contact" href="/contact" class="border-b border-grey-500">Contact</a>
    
            </div>


            <!-- Mobile Menu Button  -->
            <button id="menu-toggle" type="button" class="md:hidden p-2" aria-label="Toggle menu">
                <div class="w-5 h-5 flex flex-col justify-center items-center space-y-1">
                    <i class="fa-solid fa-bars transition-all duration-200 text-gray-500 hover:text-black hover:border-black"></i>
                </div>
            </button>
        </div>  
        
        <!-- Mobile Navigation  -->
        <div id="mobile-menu" class="md:hidden mt-4 pb-4 border-t border-gray-200 hidden">
            <div class="flex flex-col space-y-4 pt-4 text-sm font-light tracking-wide transition-colors duration-200 text-gray-600 hover:text-black">
                <a href="/" >Home</a>
                <a href="/create">Create</a>
                <a href="/explore">Explore</a>
                <a href="/about.html">About</a>
                <a href="/contact">Contact</a>
                
            </div>
        </div>
        <script>
            const menuToggle = document.getElementById('menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');

            menuToggle.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            document.addEventListener('click', (e) => {
                const isClickInside = mobileMenu.contains(e.target) || menuToggle.contains(e.target);
                if (!isClickInside && !mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
                }
            });
        </script>
      </nav>
    </header>
    
    <!-- Explore Section -->
    <div class="container mx-auto px-6 py-12 mt-[2rem]">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-12">
                <h1 class="font-playfair text-3xl md:text-4xl font-medium mb-4">Explore Feelings</h1>
                <p class="text-gray-900 font-light">Discover how others express what words cannot capture</p>
            </div>

            <!-- Filters -->
            <div class="flex flex-wrap justify-center gap-3 mb-12" id="filters"></div>

            <!-- Posts Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="postsGrid"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="flex mt-auto w-full border-t border-gray-200 bg-white">
        <div class="container mx-auto px-6 py-8">
            <div class="text-center">
                 <p class="text-xs text-gray-500 font-light tracking-wide">for those who feel too much</p>
                <div class="mt-4 text-xs text-gray-500"> &copy; 2024 feltnotsaid. All feelings reserved.</div>
            </div>
        </div>
    </footer>

    <script>
        // Data
        const filters = [
            { id: 'all', label: 'All Feelings' },
            { id: 'melancholy', label: 'Melancholy' },
            { id: 'joy', label: 'Joy' },
            { id: 'longing', label: 'Longing' },
            { id: 'peace', label: 'Peace' },
            { id: 'intensity', label: 'Intensity' }
        ];

        let posts = [];
        let activeFilter = 'all';

        // Render filter buttons
        function loadFiltersBtn() {
            const filtersDiv = document.getElementById('filters');
            filtersDiv.innerHTML = '';
            filters.forEach(filter => {
                const btn = document.createElement('button');
                btn.textContent = filter.label;
                btn.className = `px-4 py-2 text-sm  ${
                    activeFilter === filter.id
                        ? 'bg-gray-950 text-gray-50 hover:bg-gray-900'
                        : 'text-gray-900 hover:bg-gray-100'
                }`;
                btn.onclick = () => {
                    activeFilter = filter.id;
                    loadFiltersBtn();
                    loadPosts();
                };
                filtersDiv.appendChild(btn);
            });
        }

        // Get posts by filter
        function getFilteredPosts(filter) {
            if (filter === 'all') {
                return posts;
            } else {
                return posts.filter(post => post.mood === filter);
            }
        }

        // Render posts grid
        function loadPosts() {
            const postsGrid = document.getElementById('postsGrid');
            const filteredPosts = getFilteredPosts(activeFilter);
            postsGrid.innerHTML = '';

            if (filteredPosts.length === 0) {
                postsGrid.innerHTML = `
                    <div class="col-span-full text-center py-20">
                        <p class="text-gray-900 font-light">
                            No feelings found for this mood. Be the first to share.
                        </p>
                    </div>
                `;
                return;
            }

            filteredPosts.forEach((post, index) => {
                const postDiv = document.createElement('div');
                postDiv.className = "group cursor-pointer hover-lift";
                postDiv.style.animationDelay = `${index * 0.1}s`;

                postDiv.innerHTML = `
                    <div class="aspect-square relative overflow-hidden rounded-lg mb-4">
                        <img 
                            src="${post.image}"
                            alt="Feeling by ${post.author}"
                            class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
                        />
                        <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute inset-0 flex items-center justify-center p-6">
                            <p class="text-white text-center font-light tracking-wide text-shadow">
                                ${post.text}
                            </p>
                        </div>
                    </div>
                    <div class="text-center">
                        <p class="text-xs text-gray-900 font-light">
                            by ${post.author}
                        </p>
                        <span class="inline-block mt-1 px-2 py-1 text-xs bg-gray-100 text-gray-900 rounded-full">
                            ${post.mood}
                        </span>
                    </div>
                `;
                postsGrid.appendChild(postDiv);
            });
        }

        // Fetch posts from posts.json
        async function fetchPosts() {
            try {
                const res = await fetch('posts.json');
                if (!res.ok) throw new Error('Could not load posts');
                const data = await res.json();
                posts = data.posts;
            } catch (e) {
                // fallback to testPosts if fetch fails
                posts = [
                    {
                        id: 1,
                        image: 'https://images.unsplash.com/photo-1649972904349-6e44c42644a7?w=600&h=600&fit=crop',
                        text: 'some days feel like drowning in silence',
                        mood: 'melancholy',
                        author: 'anonymous soul'
                    },
                    {
                        id: 2,
                        image: 'https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=600&h=600&fit=crop',
                        text: 'finding light in the smallest moments',
                        mood: 'joy',
                        author: 'quiet observer'
                    },
                    {
                        id: 3,
                        image: 'https://images.unsplash.com/photo-1470813740244-df37b8c1edcb?w=600&h=600&fit=crop',
                        text: 'missing you in colors that dont exist',
                        mood: 'longing',
                        author: 'midnight dreamer'
                    },
                    {
                        id: 4,
                        image: 'https://images.unsplash.com/photo-1500375592092-40eb2168fd21?w=600&h=600&fit=crop',
                        text: 'waves carry away what words cannot',
                        mood: 'peace',
                        author: 'ocean child'
                    },
                    {
                        id: 5,
                        image: 'https://images.unsplash.com/photo-1523712999610-f77fbcfc3843?w=600&h=600&fit=crop',
                        text: 'burning with everything unsaid',
                        mood: 'intensity',
                        author: 'fire heart'
                    },
                    {
                        id: 6,
                        image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=600&fit=crop',
                        text: 'breathing in the space between thoughts',
                        mood: 'peace',
                        author: 'still waters'
                    }
                ];
            }
        }

        // Initial render
        window.onload = async function() {
            await fetchPosts();
            loadFiltersBtn();
            loadPosts();
        };
    </script>

</body>
</html>
